# Beacon

A simple uptime monitoring tool for websites, built with Go, SQLite, and sqlc.

## Features

- **Website Monitoring**: Regularly checks HTTP endpoints and records response times, status codes, and errors.
- **Incident Tracking**: Automatically detects and tracks downtime periods.
- **Configurable Checks**: Set custom check intervals, timeouts, and retention periods.
- **SQLite Storage**: Lightweight, file-based database with type-safe queries generated by sqlc.
- **CLI Interface**: Easy-to-use command-line interface with environment variable support.
- **Graceful Shutdown**: Handles signals for clean shutdown.

## Installation

### Prerequisites

- Go 1.25.4 or later
- SQLite3 (for development)

### Build from Source

```bash
git clone https://github.com/mizuchilabs/beacon.git
cd beacon || exit
go build -o beacon ./cmd
```

### Install with Go

```bash
go install github.com/mizuchilabs/beacon/cmd@latest
```

## Usage

### Basic Usage

Start monitoring websites:

```bash
./beacon
```

### Command Line Flags

- `--host, -h`: Server host (default: "0.0.0.0")
- `--port, -p`: Server port (default: 3000)
- `--timeout, -t`: Checker timeout (default: 30s)
- `--retention-days, -r`: Data retention days (default: 30)
- `--insecure, -i`: Disable TLS certificate verification
- `--debug, -d`: Enable debug logging
- `--version, -v`: Print version information

### Environment Variables

All flags can be set via environment variables:

- `BEACON_HOST`
- `BEACON_PORT`
- `BEACON_TIMEOUT`
- `BEACON_RETENTION_DAYS`
- `BEACON_INSECURE`
- `DEBUG`

### Examples

Run with debug logging:

```bash
./beacon --debug
```

Set custom timeout and retention:

```bash
./beacon --timeout 10s --retention-days 7
```

Use environment variables:

```bash
export BEACON_TIMEOUT=45s
export DEBUG=true
./beacon
```

## Database Setup

Beacon uses SQLite for data storage. The database file is created automatically on first run.

## Contributing

Contributions are welcome! Feel free to submit issues, fork the repository, and create pull requests.

## License

Apache License 2.0 - See [LICENSE](LICENSE)

